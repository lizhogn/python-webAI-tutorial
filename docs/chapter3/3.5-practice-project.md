# 3.5 å®è·µé¡¹ç›®ï¼šç°ä»£åŒ–çš„ Todo List åº”ç”¨

## ğŸ“– é¡¹ç›®ç›®æ ‡

ç†è®ºå­¦ä¹ çš„æœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†å®è·µã€‚åœ¨æœ¬ç« çš„æœ€åï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„å®è·µé¡¹ç›®â€”â€”"å¾…åŠäº‹é¡¹ (Todo List)"åº”ç”¨ï¼Œæ¥ç»¼åˆè¿ç”¨å‰é¢æ‰€å­¦çš„æ‰€æœ‰ Vue 3 æ ¸å¿ƒçŸ¥è¯†ã€‚

ä½ å°†ä»é›¶å¼€å§‹ï¼Œä½¿ç”¨ç°ä»£åŒ–çš„å‰ç«¯å·¥å…·é“¾ï¼Œæ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„ã€ä¸åç«¯ API å¯¹æ¥çš„å•é¡µåº”ç”¨ (SPA)ã€‚

## ğŸ—ï¸ æ ¸å¿ƒéœ€æ±‚

æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç»å…¸çš„ Todo List åº”ç”¨ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š
1.  **ä»»åŠ¡å±•ç¤º**: ä»åç«¯ API è·å–ä»»åŠ¡åˆ—è¡¨å¹¶å±•ç¤ºã€‚
2.  **æ·»åŠ ä»»åŠ¡**: é€šè¿‡è¾“å…¥æ¡†åˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡ã€‚
3.  **åˆ é™¤ä»»åŠ¡**: å¯ä»¥åˆ é™¤ä»»æ„ä¸€ä¸ªä»»åŠ¡ã€‚
4.  **åˆ‡æ¢çŠ¶æ€**: æ ‡è®°æŸä¸ªä»»åŠ¡ä¸º"å·²å®Œæˆ"æˆ–"æœªå®Œæˆ"ã€‚
5.  **çŠ¶æ€ç­›é€‰**: é€šè¿‡è·¯ç”± (`/`, `/active`, `/completed`) ç­›é€‰å¹¶æ˜¾ç¤ºä¸åŒçŠ¶æ€çš„ä»»åŠ¡ã€‚

## ğŸ“¦ æŠ€æœ¯æ ˆ

æœ¬é¡¹ç›®å°†é‡‡ç”¨å½“å‰ Vue ç”Ÿæ€ç³»ç»Ÿä¸­æœ€ä¸»æµã€æœ€é«˜æ•ˆçš„æŠ€æœ¯æ ˆï¼š
- **æ„å»ºå·¥å…·**: `Vite`
- **æ ¸å¿ƒæ¡†æ¶**: `Vue 3` (ä½¿ç”¨ `<script setup>` è¯­æ³•)
- **è·¯ç”±ç®¡ç†**: `Vue Router 4`
- **çŠ¶æ€ç®¡ç†**: `Pinia`
- **HTTP è¯·æ±‚**: `axios` æˆ–åŸç”Ÿçš„ `fetch` API

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„å»ºè®®
```
todo-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/         # å­˜æ”¾é™æ€èµ„æºï¼Œå¦‚ CSS, å›¾ç‰‡
â”‚   â”œâ”€â”€ components/     # å­˜æ”¾å¯å¤ç”¨çš„ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TodoList.vue
â”‚   â”‚   â”œâ”€â”€ TodoItem.vue
â”‚   â”‚   â””â”€â”€ TodoForm.vue
â”‚   â”œâ”€â”€ views/          # å­˜æ”¾è·¯ç”±é¡µé¢çº§ç»„ä»¶
â”‚   â”‚   â””â”€â”€ HomeView.vue
â”‚   â”œâ”€â”€ stores/         # å­˜æ”¾ Pinia store
â”‚   â”‚   â””â”€â”€ todo.js
â”‚   â”œâ”€â”€ router/         # å­˜æ”¾è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”œâ”€â”€ App.vue         # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.js         # åº”ç”¨å…¥å£
â”œâ”€â”€ public/
â””â”€â”€ package.json
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½ä»£ç æŒ‡å—

ä»¥ä¸‹æ˜¯å®ç°æ ¸å¿ƒåŠŸèƒ½çš„ä¸€äº›å…³é”®ä»£ç ç‰‡æ®µå’Œæ€è·¯ã€‚

### 1. Pinia çŠ¶æ€ç®¡ç† (`stores/todo.js`)
é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª `todo` store æ¥ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ä¸ä»»åŠ¡ç›¸å…³çš„çŠ¶æ€å’Œæ“ä½œã€‚

```js
import { ref, computed } from 'vue'
import { defineStore } from 'pinia'
import axios from 'axios'

const API_URL = 'http://localhost:8000/api/todos' // ä½ çš„åç«¯ API åœ°å€

export const useTodoStore = defineStore('todo', () => {
  // --- State ---
  const todos = ref([])
  const filter = ref('all') // 'all', 'active', 'completed'

  // --- Getters ---
  const filteredTodos = computed(() => {
    switch (filter.value) {
      case 'active':
        return todos.value.filter(t => !t.completed)
      case 'completed':
        return todos.value.filter(t => t.completed)
      default:
        return todos.value
    }
  })

  // --- Actions ---
  async function fetchTodos() {
    const { data } = await axios.get(API_URL)
    todos.value = data
  }

  async function addTodo(title) {
    const { data } = await axios.post(API_URL, { title, completed: false })
    todos.value.push(data)
  }

  async function deleteTodo(id) {
    await axios.delete(`${API_URL}/${id}`)
    todos.value = todos.value.filter(t => t.id !== id)
  }

  async function toggleTodo(id) {
    const todo = todos.value.find(t => t.id === id)
    if (todo) {
      const updatedTodo = { ...todo, completed: !todo.completed }
      await axios.put(`${API_OPI_URL}/${id}`, updatedTodo)
      todo.completed = !todo.completed
    }
  }
  
  function setFilter(newFilter) {
    filter.value = newFilter
  }

  return { todos, filter, filteredTodos, fetchTodos, addTodo, deleteTodo, toggleTodo, setFilter }
})
```

### 2. è·¯ç”±é…ç½® (`router/index.js`)
æˆ‘ä»¬ä½¿ç”¨è·¯ç”±å‚æ•°æ¥æ§åˆ¶ä»»åŠ¡åˆ—è¡¨çš„ç­›é€‰çŠ¶æ€ã€‚

```js
import { createRouter, createWebHistory } from 'vue-router'
import HomeView from '../views/HomeView.vue'

const routes = [
  {
    // :filter? è¡¨ç¤º filter å‚æ•°æ˜¯å¯é€‰çš„
    path: '/:filter?',
    name: 'home',
    component: HomeView
  }
]

const router = createRouter({
  history: createWebHistory(),
  routes
})

export default router
```

### 3. é¡µé¢ä¸ç»„ä»¶ (`views/HomeView.vue`)
`HomeView` ä½œä¸ºä¸»é¡µé¢ï¼Œè´Ÿè´£æ•´åˆå„ä¸ªå­ç»„ä»¶ï¼Œå¹¶ä¸ Pinia store è¿›è¡Œäº¤äº’ã€‚

```vue
<script setup>
import { onMounted, watch } from 'vue'
import { useRoute } from 'vue-router'
import { storeToRefs } from 'pinia'
import { useTodoStore } from '@/stores/todo'
import TodoForm from '@/components/TodoForm.vue'
import TodoList from '@/components/TodoList.vue'

const store = useTodoStore()
const route = useRoute()

// ä½¿ç”¨ storeToRefs ä¿æŒå“åº”æ€§
const { filteredTodos } = storeToRefs(store)
const { fetchTodos, addTodo, deleteTodo, toggleTodo, setFilter } = store

// åœ¨ç»„ä»¶æŒ‚è½½æ—¶è·å–åˆå§‹æ•°æ®
onMounted(() => {
  fetchTodos()
})

// ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œå¹¶æ›´æ–° store ä¸­çš„ filter çŠ¶æ€
watch(
  () => route.params.filter,
  (newFilter) => {
    setFilter(newFilter || 'all')
  },
  { immediate: true } // ç«‹å³æ‰§è¡Œä¸€æ¬¡
)
</script>

<template>
  <div class="todo-app">
    <h1>Todo App</h1>
    <TodoForm @add-todo="addTodo" />
    <TodoList 
      :todos="filteredTodos" 
      @delete-todo="deleteTodo" 
      @toggle-todo="toggleTodo"
    />
    <nav class="filters">
      <router-link to="/all">All</router-link>
      <router-link to="/active">Active</router-link>
      <router-link to="/completed">Completed</router-link>
    </nav>
  </div>
</template>
```

## ğŸ› ï¸ é¡¹ç›®æŒ‘æˆ˜ä¸ä¼˜åŒ–

å®Œæˆæ ¸å¿ƒåŠŸèƒ½åï¼Œå°è¯•ä»¥ä¸‹æŒ‘æˆ˜æ¥æå‡ä½ çš„æŠ€èƒ½ï¼š
- **åŠ è½½ä¸é”™è¯¯çŠ¶æ€**: åœ¨ API è¯·æ±‚æœŸé—´æ˜¾ç¤ºåŠ è½½æç¤ºï¼Œå¹¶åœ¨è¯·æ±‚å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚
- **æ•°æ®æŒä¹…åŒ–**: ä½¿ç”¨ `pinia-plugin-persistedstate` å°†ç­›é€‰çŠ¶æ€ `filter` æŒä¹…åŒ–åˆ° `localStorage`ã€‚
- **ç»„ä»¶åŠ¨ç”»**: ä½¿ç”¨ Vue çš„ `<TransitionGroup>` ç»„ä»¶ä¸ºåˆ—è¡¨çš„å¢åˆ æ“ä½œæ·»åŠ å¹³æ»‘çš„åŠ¨ç”»æ•ˆæœã€‚
- **æ ·å¼ç¾åŒ–**: ä½¿ç”¨ä½ å–œæ¬¢çš„ CSS æ¡†æ¶ (å¦‚ Tailwind CSS) æˆ–è‡ªå·±ç¼–å†™ CSS æ¥ç¾åŒ–ç•Œé¢ã€‚

## ğŸ” çŸ¥è¯†æ£€æŸ¥

å®Œæˆæœ¬é¡¹ç›®åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š
- [ ] ç‹¬ç«‹ä½¿ç”¨ Vite, Vue 3, Pinia, Vue Router ä»é›¶æ­å»ºä¸€ä¸ª SPA é¡¹ç›®ã€‚
- [ ] æ¸…æ™°åœ°åˆ’åˆ† `stores`, `components`, `views`, `router` çš„èŒè´£ã€‚
- [ ] åœ¨ Pinia store ä¸­å°è£…å¼‚æ­¥ Actions ä¸åç«¯ API è¿›è¡Œäº¤äº’ã€‚
- [ ] åœ¨ç»„ä»¶ä¸­ç»„åˆä½¿ç”¨ Pinia å’Œ Vue Router æ¥æ„å»ºå“åº”å¼é¡µé¢ã€‚
- [ ] å°†ç†è®ºçŸ¥è¯†åº”ç”¨äºè§£å†³å®é™…çš„å¼€å‘é—®é¢˜ã€‚

---

**ä¸Šä¸€èŠ‚**ï¼š[3.4 è·¯ç”±å’Œå¯¼èˆª](3.4-routing.md) | **ä¸‹ä¸€ç« **ï¼š[ç¬¬å››ç«  AI æ¨¡å‹é›†æˆ](../chapter4/README.md) 