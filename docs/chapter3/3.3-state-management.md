# 3.3 状态管理

## 📖 概述

本章将介绍前端应用中的状态管理，重点讲解 Vuex 的使用方法，帮助你管理大型应用的数据流和状态同步。

## 🗂️ 什么是状态管理？
- 状态：组件间共享的数据（如用户信息、购物车、登录状态等）
- 小型项目可用 props/$emit 传递，复杂项目推荐集中管理

## 🌟 Vuex 简介
- Vuex 是 Vue 官方的状态管理库，适合中大型项目
- 核心思想：单一状态树、可预测的数据流

## 🏗️ Vuex 核心概念
- **State**：全局状态
- **Getter**：派生状态（类似计算属性）
- **Mutation**：同步修改状态
- **Action**：异步操作（如 API 请求）
- **Module**：模块化拆分

## 🚀 快速上手

### 安装
```bash
npm install vuex --save
```

### 基本用法
```js
// store.js
import Vue from 'vue'
import Vuex from 'vuex'
Vue.use(Vuex)

export default new Vuex.Store({
  state: { count: 0 },
  mutations: {
    increment(state) { state.count++ }
  },
  actions: {
    asyncIncrement({ commit }) {
      setTimeout(() => { commit('increment') }, 1000)
    }
  },
  getters: {
    doubleCount: state => state.count * 2
  }
})

// main.js
import store from './store'
new Vue({ store })
```

### 组件中使用
```js
computed: {
  count() { return this.$store.state.count },
  double() { return this.$store.getters.doubleCount }
},
methods: {
  add() { this.$store.commit('increment') },
  addAsync() { this.$store.dispatch('asyncIncrement') }
}
```

## 🧩 模块化
```js
const user = {
  state: { name: '' },
  mutations: { setName(state, name) { state.name = name } }
}
const store = new Vuex.Store({ modules: { user } })
```

## 🛠️ 状态管理最佳实践
- 状态最小化、只存全局共享数据
- Mutation 只做同步操作
- Action 处理异步和业务逻辑
- 使用 mapState/mapGetters/mapActions 辅助函数

## 📚 学习资源
- [Vuex 官方文档](https://vuex.vuejs.org/zh/)
- [Vuex 模块化](https://vuex.vuejs.org/zh/guide/modules.html)
- [状态管理模式](https://cn.vuejs.org/v2/guide/state-management.html)

## 🔍 知识检查
- [ ] 理解状态管理的意义
- [ ] 能够使用 Vuex 管理全局状态
- [ ] 掌握 Mutation/Action/Getter 区别
- [ ] 能够拆分模块化 store

---

**上一节**：[3.2 组件化开发](3.2-components.md) | **下一节**：[3.4 路由和导航](3.4-routing.md) 